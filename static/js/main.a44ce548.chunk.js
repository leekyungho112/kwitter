(this.webpackJsonpkwitter=this.webpackJsonpkwitter||[]).push([[0],{17:function(e,t,a){e.exports={container:"Profile_container__2uaFG",profileForm:"Profile_profileForm__11Gx8",formInput:"Profile_formInput__pOEUr",formBtn:"Profile_formBtn__2NlnF",img:"Profile_img__2717H",factoryInput__label:"Profile_factoryInput__label__2FO4I",factoryForm__clear:"Profile_factoryForm__clear__2aYIn",cancelBtn:"Profile_cancelBtn__117uY",logOut:"Profile_logOut__1cfMh"}},18:function(e,t,a){e.exports={kweet:"Kweet_kweet__rIpJJ",formInput:"Kweet_formInput__34epl",formBtn:"Kweet_formBtn__UQGq6",kweetEdit:"Kweet_kweetEdit__2LItd",img:"Kweet_img__1RAe0",avatar:"Kweet_avatar__2MM2D",kweet__actions:"Kweet_kweet__actions__3bxOc"}},22:function(e,t,a){e.exports={factoryForm:"KweetFactory_factoryForm__1xykW",factoryInput__container:"KweetFactory_factoryInput__container__2dDZa",factoryInput__input:"KweetFactory_factoryInput__input__34Usa",factoryInput__label:"KweetFactory_factoryInput__label__-vBOk",factoryInput__arrow:"KweetFactory_factoryInput__arrow__1Kmzd",img:"KweetFactory_img__3l1ir",factoryForm__clear:"KweetFactory_factoryForm__clear__3SJaR"}},23:function(e,t,a){e.exports={container:"AuthForm_container__-udYq",authInput:"AuthForm_authInput__2SJL6",authSubmit:"AuthForm_authSubmit__3qx9O",authError:"AuthForm_authError__3qHrn",authSwitch:"AuthForm_authSwitch__2blvT"}},29:function(e,t,a){e.exports={authContainer:"Auth_authContainer__2khJD",authBtns:"Auth_authBtns__1mcnO",authBtn:"Auth_authBtn__7lkGw"}},31:function(e,t,a){e.exports={nav:"Navigation_nav__1OHbF",icon:"Navigation_icon__r17MX",link:"Navigation_link__2Svw_",avatar:"Navigation_avatar__Xa3wR"}},57:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(39),s=a.n(c),o=a(7),i=a(26),u=a(6),l=a(11),j=a.n(l),p=a(19),b=a(28);a(48),a(60),a(59);b.a.initializeApp({apiKey:"AIzaSyDiUD7RbJyKU_E9xd696vSIUlEXQIt1l1U",authDomain:"kwitter-fe998.firebaseapp.com",projectId:"kwitter-fe998",storageBucket:"kwitter-fe998.appspot.com",messagingSenderId:"484834249192",appId:"1:484834249192:web:d41b6244f4fe7a730d3c5d"});var d=b.a,f=b.a.auth(),h=b.a.firestore(),m=b.a.storage(),_=a(23),O=a.n(_),x=a(1),v=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),s=Object(o.a)(c,2),i=s[0],u=s[1],l=Object(n.useState)(!0),b=Object(o.a)(l,2),d=b[0],h=b[1],m=Object(n.useState)(""),_=Object(o.a)(m,2),v=_[0],g=_[1],w=function(e){var t=e.target,a=t.value,n=t.name;"email"===n?r(a):"password"===n&&u(a)},y=function(){var e=Object(p.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!d){e.next=8;break}return e.next=5,f.createUserWithEmailAndPassword(a,i).then((function(e){var t=e.user;t.updateProfile({displayName:t.email,photoURL:"https://w7.pngwing.com/pngs/858/581/png-transparent-profile-icon-user-computer-icons-system-chinese-wind-title-column-miscellaneous-service-logo.png"})}));case 5:n=e.sent,e.next=11;break;case 8:return e.next=10,f.signInWithEmailAndPassword(a,i);case 10:n=e.sent;case 11:console.log(n),window.location.replace("/"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),g(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("form",{onSubmit:y,className:O.a.container,children:[Object(x.jsx)("input",{name:"email",type:"email",placeholder:"Email",required:!0,value:a,onChange:w,className:O.a.authInput}),Object(x.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:i,onChange:w,className:O.a.authInput}),Object(x.jsx)("input",{type:"submit",className:[O.a.authInput,O.a.authSubmit].join(" "),value:d?"Create Account":"Log In"}),v&&Object(x.jsx)("span",{className:O.a.authError,children:v})]}),Object(x.jsx)("span",{onClick:function(){return h((function(e){return!e}))},className:O.a.authSwitch,children:d?"\uacc4\uc815\uc774 \uc874\uc7ac \ud558\ub098\uc694?":"\uc0c8\ub85c\uc6b4 \uacc4\uc815\uc744 \ub9cc\ub4dc\uc138\uc694"})]})},g=a(29),w=a.n(g),y=a(12),k=a(27),N=function(){var e=function(){var e=Object(p.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(a=t.target.name)?n=new d.auth.GoogleAuthProvider:"github"===a&&(n=new d.auth.GithubAuthProvider),e.next=4,f.signInWithPopup(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:w.a.authContainer,children:[Object(x.jsx)(y.a,{icon:k.c,color:"#04AAFF",size:"3x",style:{marginBottom:30}}),Object(x.jsx)(v,{}),Object(x.jsxs)("div",{className:w.a.authBtns,children:[Object(x.jsxs)("button",{name:"google",onClick:e,className:w.a.authBtn,children:["Continue with Google ",Object(x.jsx)(y.a,{icon:k.b})]}),Object(x.jsxs)("button",{name:"github",onClick:e,className:w.a.authBtn,children:["Continue with Github ",Object(x.jsx)(y.a,{icon:k.a})]})]})]})},F=a(41),I=a(18),U=a.n(I),S=a(20),R=function(e){var t=e.kweetObj,a=e.isOwner,r=Object(n.useState)(!1),c=Object(o.a)(r,2),s=c[0],i=c[1],u=Object(n.useState)(t.text),l=Object(o.a)(u,2),b=l[0],d=l[1],f=function(){i((function(e){return!e}))},_=function(){var e=Object(p.a)(j.a.mark((function e(){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=window.confirm("\uc815\ub9d0 \uc0ad\uc81c\ud558\uae30\ub97c \uc6d0\ud558\uc2ed\ub2c8\uae4c?"),console.log(a),!a){e.next=8;break}return e.next=5,h.doc("kweets/".concat(t.id)).delete();case 5:if(""===t.attachmentUrl){e.next=8;break}return e.next=8,m.refFromURL(t.attachmentUrl).delete();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsx)("div",{className:U.a.kweet,children:s?Object(x.jsx)(x.Fragment,{children:a&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),h.doc("kweets/".concat(t.id)).update({text:b}),i(!1)},className:[U.a.container,U.a.kweetEdit].join(" "),children:[Object(x.jsx)("input",{type:"text",value:b,placeholder:"Edit your kweet",onChange:function(e){var t=e.target.value;d(t)},required:!0,autoFocus:!0,className:U.a.formInput}),Object(x.jsx)("input",{type:"submit",value:"Update Kweet",className:U.a.formBtn})]}),Object(x.jsx)("span",{onClick:f,className:[U.a.formBtn,U.a.cancelBtn].join(" "),children:"Cancel"})]})}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("img",{src:t.avatar,alt:t.author,className:U.a.avatar}),Object(x.jsx)("h6",{children:t.author}),Object(x.jsx)("h4",{children:t.text}),t.attachmentUrl&&Object(x.jsx)("img",{src:t.attachmentUrl,alt:t.attachmentUrl,className:U.a.img}),a&&Object(x.jsxs)("div",{className:U.a.kweet__actions,children:[Object(x.jsx)("span",{onClick:_,children:Object(x.jsx)(y.a,{icon:S.d})}),Object(x.jsx)("span",{onClick:f,children:Object(x.jsx)(y.a,{icon:S.a})})]})]})})},A=a(61),B=a(22),C=a.n(B),L=function(e){var t=e.userObj,a=Object(n.useState)(""),r=Object(o.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)(""),u=Object(o.a)(i,2),l=u[0],b=u[1],d=Object(n.useRef)(),f=function(){var e=Object(p.a)(j.a.mark((function e(a){var n,r,o,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==c){e.next=2;break}return e.abrupt("return");case 2:if(a.preventDefault(),n="",""===l){e.next=12;break}return r=m.ref().child("".concat(t.uid,"/").concat(Object(A.a)())),e.next=8,r.putString(l,"data_url");case 8:return o=e.sent,e.next=11,o.ref.getDownloadURL();case 11:n=e.sent;case 12:return i={text:c,author:t.displayName,avatar:t.photoURL,createdAt:Date.now(),createrId:t.uid,attachmentUrl:n},e.next=15,h.collection("kweets").add(i);case 15:s(""),b("");case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("form",{onSubmit:f,className:C.a.factoryForm,children:[Object(x.jsxs)("div",{className:C.a.factoryInput__container,children:[Object(x.jsx)("input",{type:"text",value:c,className:C.a.factoryInput__input,placeholder:"what's on your mind?",maxLength:120,onChange:function(e){var t=e.target.value;s(t)}}),Object(x.jsx)("input",{type:"submit",value:"\u2192",className:C.a.factoryInput__arrow})]}),Object(x.jsxs)("label",{htmlFor:"attach-file",className:C.a.factoryInput__label,children:[Object(x.jsx)("span",{children:"Add photos"}),Object(x.jsx)(y.a,{icon:S.b})]}),Object(x.jsx)("input",{id:"attach-file",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],a=new FileReader;a.onloadend=function(e){var t=e.currentTarget.result;b(t)},a.readAsDataURL(t)},ref:d,style:{opacity:0}}),l&&Object(x.jsxs)("div",{className:C.a.factoryForm__attachment,children:[Object(x.jsx)("img",{className:C.a.img,src:l,alt:l,style:{backgroundImage:l}}),Object(x.jsxs)("div",{className:C.a.factoryForm__clear,onClick:function(){b(""),d.current.value=""},children:[Object(x.jsx)("span",{children:"Remove"}),Object(x.jsx)(y.a,{icon:S.c})]})]})]})},P=function(e){var t=e.userObj,a=Object(n.useState)([]),r=Object(o.a)(a,2),c=r[0],s=r[1];return Object(n.useEffect)((function(){var e=h.collection("kweets").orderBy("createdAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(F.a)({id:e.id},e.data())}));s(t)}));return function(){return e()}}),[]),Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)(L,{userObj:t}),Object(x.jsx)("div",{style:{marginTop:30},children:c.map((function(e){return Object(x.jsx)(R,{kweetObj:e,isOwner:e.createrId===t.uid},e.id)}))})]})},K=a(31),D=a.n(K),E=function(e){var t=e.userObj;return Object(x.jsx)("nav",{children:Object(x.jsxs)("ul",{className:D.a.nav,children:[Object(x.jsx)("li",{children:Object(x.jsx)(i.b,{to:"/",className:D.a.icon,children:Object(x.jsx)(y.a,{icon:k.c,color:"#04AAFF",size:"2x"})})}),Object(x.jsx)("li",{children:Object(x.jsxs)(i.b,{to:"/profile",className:D.a.link,children:[Object(x.jsx)("img",{className:D.a.avatar,src:t.photoURL,alt:t.photoURL})," ",t.displayName?"".concat(t.displayName,"\uc758 Profile"):"Profile"]})})]})})},G=a(17),J=a.n(G),q=function(e){var t=e.userObj,a=e.refreshUser,r=Object(u.f)(),c=Object(n.useState)(t.displayName),s=Object(o.a)(c,2),i=s[0],l=s[1],b=Object(n.useState)(t.photoURL),d=Object(o.a)(b,2),h=d[0],_=d[1],O=Object(n.useState)(!1),v=Object(o.a)(O,2),g=v[0],w=v[1],k=Object(n.useRef)(),N=function(){var e=Object(p.a)(j.a.mark((function e(n){var r,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),g){e.next=21;break}if(w(!0),t.displayName===i){e.next=7;break}return e.next=6,t.updateProfile({displayName:i});case 6:a();case 7:if(r="",t.photoURL===h){e.next=21;break}return c=m.ref().child("".concat(t.uid,"/").concat(Object(A.a)())),e.next=12,c.putString(h,"data_url");case 12:return s=e.sent,e.next=15,s.ref.getDownloadURL();case 15:return r=e.sent,e.next=18,t.updateProfile({photoURL:r});case 18:return e.next=20,m.refFromURL(t.photoURL).delete();case 20:a();case 21:w(!1),_(""),l(""),k.current.value="";case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:J.a.container,children:[Object(x.jsxs)("form",{onSubmit:N,className:J.a.profileForm,children:[Object(x.jsx)("input",{type:"text",placeholder:"Display name",value:i,onChange:function(e){var t=e.target.value;l(t)},autoFocus:!0,className:J.a.formInput}),Object(x.jsxs)("label",{htmlFor:"attach-file",className:J.a.factoryInput__label,children:[Object(x.jsx)("span",{children:"Add photos"}),Object(x.jsx)(y.a,{icon:S.b})]}),Object(x.jsx)("input",{id:"attach-file",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],a=new FileReader;a.onloadend=function(e){var t=e.currentTarget.result;_(t)},a.readAsDataURL(t)},ref:k,style:{opacity:0}}),h&&Object(x.jsxs)("div",{className:J.a.factoryForm__attachment,children:[Object(x.jsx)("img",{className:J.a.img,src:h,alt:h,style:{backgroundImage:h}}),Object(x.jsxs)("div",{className:J.a.factoryForm__clear,onClick:function(){_(""),k.current.value=""},children:[Object(x.jsx)("span",{children:"Remove"}),Object(x.jsx)(y.a,{icon:S.c})]})]}),Object(x.jsx)("input",{type:"submit",value:g?"save...":"update Profile",className:J.a.formBtn})]}),Object(x.jsx)("span",{className:[J.a.formBtn,J.a.cancelBtn,J.a.logOut].join(" "),onClick:function(){f.signOut(),r.push("/")},children:"Log Out"})]})},z=function(e){var t=e.isLoggedIn,a=e.userObj,n=e.refreshUser;return Object(x.jsxs)(i.a,{children:[t&&Object(x.jsx)(E,{userObj:a}),Object(x.jsx)(u.c,{children:Object(x.jsx)(x.Fragment,{children:t?Object(x.jsxs)("div",{style:{maxWidth:890,width:"100%",margin:"0 auto",marginTop:80,display:"flex",justifyContent:"center"},children:[Object(x.jsx)(u.a,{exact:!0,path:"/",children:Object(x.jsx)(P,{userObj:a})}),Object(x.jsx)(u.a,{exact:!0,path:"/profile",children:Object(x.jsx)(q,{userObj:a,refreshUser:n})})]}):Object(x.jsx)(u.a,{exact:!0,path:"/",children:Object(x.jsx)(N,{})})})})]})};var M=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),s=Object(o.a)(c,2),i=s[0],u=s[1];return Object(n.useEffect)((function(){f.onAuthStateChanged((function(e){u(e?{displayName:e.displayName,photoURL:e.photoURL,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}}:null),r(!0)}))}),[]),Object(x.jsx)(x.Fragment,{children:a?Object(x.jsx)(z,{refreshUser:function(){var e=f.currentUser;u({displayName:e.displayName,photoURL:e.photoURL,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}})},isLoggedIn:Boolean(i),userObj:i}):"Init....."})};a(57);s.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(M,{})}),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.a44ce548.chunk.js.map